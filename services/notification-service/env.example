# Enhanced Notification Service Environment Configuration
# Copy this file to .env and update the values

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================
NOTIFICATION_SERVICE_PORT=8084
NOTIFICATION_WEBSOCKET_PORT=8085
NOTIFICATION_METRICS_PORT=9094
NOTIFICATION_GRPC_PORT=50054
NOTIFICATION_SERVICE_HOST=0.0.0.0

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# MongoDB
MONGO_URI=mongodb://localhost:27017
MONGO_DATABASE=file_sharing
MONGO_TIMEOUT=30s
MONGO_MAX_POOL_SIZE=100

# Redis
REDIS_ENABLED=true
REDIS_ADDR=localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=5

# =============================================================================
# KAFKA CONFIGURATION
# =============================================================================
KAFKA_BROKERS=localhost:9092
KAFKA_GROUP_ID=notification-service
KAFKA_TOPIC_FILE_EVENTS=file-events
KAFKA_TOPIC_DLQ=notification-dlq
KAFKA_CONSUMER_TIMEOUT=10s
KAFKA_PRODUCER_TIMEOUT=10s

# =============================================================================
# EMAIL CONFIGURATION (SMTP)
# =============================================================================
SMTP_ENABLED=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@yourcompany.com
SMTP_TLS=true
SMTP_AUTH=true

# =============================================================================
# SMS CONFIGURATION (TWILIO)
# =============================================================================
TWILIO_ENABLED=true
TWILIO_ACCOUNT_SID=your-account-sid
TWILIO_AUTH_TOKEN=your-auth-token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_API_URL=https://api.twilio.com

# =============================================================================
# PUSH NOTIFICATION CONFIGURATION
# =============================================================================
# Firebase Cloud Messaging (FCM)
FCM_ENABLED=true
FCM_SERVER_KEY=your-fcm-server-key
FCM_API_URL=https://fcm.googleapis.com/fcm/send

# WebPush
WEBPUSH_ENABLED=true
WEBPUSH_VAPID_PUBLIC_KEY=your-vapid-public-key
WEBPUSH_VAPID_PRIVATE_KEY=your-vapid-private-key
WEBPUSH_VAPID_SUBJECT=mailto:admin@yourcompany.com

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
WEBSOCKET_ENABLED=true
WEBSOCKET_READ_BUFFER_SIZE=1024
WEBSOCKET_WRITE_BUFFER_SIZE=1024
WEBSOCKET_MAX_MESSAGE_SIZE=512
WEBSOCKET_PING_PERIOD=54
WEBSOCKET_PONG_WAIT=60
WEBSOCKET_WRITE_WAIT=10

# =============================================================================
# BATCHING CONFIGURATION
# =============================================================================
BATCH_ENABLED=true
BATCH_WINDOW_SECONDS=300
BATCH_MAX_SIZE=10
BATCH_BYPASS_EVENTS=CRITICAL,SECURITY_ALERT

# =============================================================================
# RETRY CONFIGURATION
# =============================================================================
RETRY_MAX_ATTEMPTS=3
RETRY_INITIAL_DELAY_SECONDS=1
RETRY_MAX_DELAY_SECONDS=60
RETRY_MULTIPLIER=2
RETRY_JITTER=true

# =============================================================================
# DEAD LETTER QUEUE (DLQ) CONFIGURATION
# =============================================================================
DLQ_ENABLED=true
DLQ_RETRY_DELAY_SECONDS=3600
DLQ_MAX_RETRIES=5
DLQ_CLEANUP_DAYS=30
DLQ_BATCH_SIZE=100

# =============================================================================
# CIRCUIT BREAKER CONFIGURATION
# =============================================================================
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT_SECONDS=60
CIRCUIT_BREAKER_HALF_OPEN_MAX_CALLS=3

# =============================================================================
# TEMPLATE CONFIGURATION
# =============================================================================
TEMPLATE_CACHE_TTL_SECONDS=3600
TEMPLATE_DEFAULT_LANGUAGE=en
TEMPLATE_FALLBACK_LANGUAGE=en
TEMPLATE_AUTO_CREATE=true

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_TIMEOUT_SECONDS=5
HEALTH_CHECK_RETRY_COUNT=3

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================
JWT_SECRET=your-super-secret-key-change-in-production
JWT_EXPIRY=3600
AUTH_SERVICE_GRPC=auth-service:50051

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_DURATION=60
RATE_LIMIT_BURST=10

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-User-ID
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9094
METRICS_PATH=/metrics
METRICS_TIMEOUT=10s

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE=
LOG_MAX_SIZE=100
LOG_MAX_BACKUPS=3
LOG_MAX_AGE=28

# =============================================================================
# GENERAL CONFIGURATION
# =============================================================================
ENVIRONMENT=development
DEBUG=false