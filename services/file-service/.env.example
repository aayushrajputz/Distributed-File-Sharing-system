# File Service Configuration

# Service Configuration
FILE_SERVICE_PORT=8082
FILE_GRPC_PORT=50052
FILE_SERVICE_HOST=0.0.0.0
ENVIRONMENT=development
LOG_LEVEL=info

# MongoDB Configuration (REQUIRED)
MONGO_URI=mongodb://mongo:27017
MONGO_DATABASE=file_sharing

# MinIO Configuration (REQUIRED)
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=your-minio-access-key
MINIO_SECRET_KEY=your-minio-secret-key
MINIO_BUCKET=file-sharing
MINIO_USE_SSL=false

# Kafka Configuration (REQUIRED)
KAFKA_BROKERS=kafka:9092

# Auth Service
AUTH_SERVICE_GRPC=auth-service:50051

# File Size Limits
# Maximum: 5GB = 5368709120 bytes
# Minimum: 1 byte
MAX_FILE_SIZE=5368709120
MIN_FILE_SIZE=1

# Upload Configuration
# Presigned URL expiry time (duration format: 15m, 1h, etc.)
PRESIGNED_URL_EXPIRY=15m
UPLOAD_RETRIES=3

# Pagination
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# Timeouts
# Operation timeout for file operations (upload, download, etc.)
OPERATION_TIMEOUT=30s
# Query timeout for database operations
QUERY_TIMEOUT=5s
# Shutdown timeout for graceful shutdown
SHUTDOWN_TIMEOUT=10s

# Rate Limiting
# Number of uploads allowed per user per minute
UPLOAD_RATE_PER_MINUTE=10
# Burst capacity for rate limiter
UPLOAD_RATE_BURST=10

# Circuit Breaker Configuration
# Maximum requests allowed when half-open
CIRCUIT_BREAKER_MAX_REQ=3
# Timeout before attempting to close circuit
CIRCUIT_BREAKER_TIMEOUT=30s

# MIME Type Whitelist (Optional)
# Comma-separated list of allowed MIME types
# If not set, uses built-in whitelist (recommended)
# ALLOWED_MIME_TYPES=image/jpeg,image/png,application/pdf

# Redis Configuration
# Enable/disable Redis caching
REDIS_ENABLED=true
# Redis server address
REDIS_ADDR=redis:6379
# Redis password (leave empty if no password)
REDIS_PASSWORD=
# Redis database number (0-15)
REDIS_DB=0
# Cache TTL (time to live) - how long cached data stays valid
REDIS_CACHE_TTL=5m
# Maximum number of retries for failed Redis operations
REDIS_MAX_RETRIES=3
# Redis connection pool size
REDIS_POOL_SIZE=10
# Minimum number of idle connections in the pool
REDIS_MIN_IDLE_CONNS=5

# Security Notes:
# 1. Never commit this file with real credentials
# 2. MINIO_ACCESS_KEY and MINIO_SECRET_KEY are required
# 3. MONGO_URI and KAFKA_BROKERS are required
# 4. Service will fail to start if required variables are missing
# 5. Use strong, unique credentials in production
# 6. Redis caching can be disabled by setting REDIS_ENABLED=false
